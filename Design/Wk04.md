# Wk04

Hours: 3.5

## Feature Request:
Sort recipes by "Can Make Now":
Requires:
- List of already owned ingredients (in pantry shopping list)
- Filter recipe option in "Sort By"
Trivial to add sort meals by "Can Make Now"

Maybe add button on home screen for what can I make now (recipes and meals)?

## Determining Budget Analytics (What actually matters/what do we want to know?):
Budget vs Actual:
- Budget / Projected / Actual
  - Annual Meal Spending
  - Monthly Meal Spending
  - Weekly Meal Spending

- Piecewise  
  - Cost Per Meal
  - Cost Per Recipe Per Person

- Shopping List
  - Estimated / Actual
  - Ingredient Price Changes

How do we track this?
- Current Prices
- Purchase records/reciepts (from shopping)

What is the budget (Set)?
- How much do we have total?
- How much do we have per month?
- How much do we have per week?
- How much do we have per day?

What is the Projectd Costs (Dynamic)?
- Based on what we have spent, and what we have planned, what are our annual, monthly, weekly, and daily costs?

What is our actual costs?
- Only viewable for what we have records for. 
- Records are pulled from reciepts.
- A receipt may be for a Store/Restaurant. Contains:
  - Pairs of (item, price)
  - Subtotal: (cumulative of item prices)
  - Total: Subtotal * (1 + tax percentage as a decimal).

After a meal time, the app will send a notification to the user asking if they actually ate what was planned. If the user doesn't
respond, then the next time they open the app, it will ask.

Users can add items to the shopping list that aren't in the plan. This can occur before or after they have clicked the go shopping.

Possible customization: Users can prefer the "Go Shopping" action, or the "I went Shopping Action"
- "Go Shopping":
  - Live, allows you to check off everything as you do it.
- "I went Shopping":
  - Reflective: Asks the user if the generated list was accurate. 
  - If not accurate, has them enter the actual price and correct any item prices or add any extra items.

## Flowcharts/Data Flow Diagrams (By Workflow):

### Add Ingredient

1. User clicks "Add Ingredient.
2. Add/Edit Ingredient dialog pops up
3. User enters ingredient name and category in General Tab
4. User enters store, price, quatntity, and unit per package. (May be done more than once) in the Purchase Options Tab
5. User clicks "Add Option"
5. User enters a unit conversion in the Conversions Tab (optional may be done more than once)
6. User clicks save.

### Add Recipe
1. User clicks "Add Recipe"
2. User Enters Recipe Name, Description, and Instructions in General Tab
3. User Enters Prep time, cook time, and # servings in the Other Tab
4. User adds ingredients to the recipe in the Ingredients Tab.
5. User Clicks save

### Create Pre-Planned Meal
1. User Creates the "New Meal" button
2. User enters Name, Meal Type, and Description in the General Tab
3. User clicks add item in the Contents Tab (may be/usually repeated)
  3a. User Selects whether item is recipe or ingredient.
  3b. User selects item.
  3c. User clicks add.
4. Once all items are added, user clicks "Save"

### Schedule Meal
1. User Opens Calendar View
2. User clicks "Add Meal"
3. User selects date and time for the meal.
4. User selects Meal Type.
5. User enters # people eating
6. User Selects Pre-planned meal
7. User clicks "Save"

### Go Shopping
1. User clicks "Go Shopping"
2. User selects store
3. User marks off items as they add them to their cart
4. User selects purchase
5. User answers whether the estimate was accurate.
6. If not, prompts user to enter item price adjustments
7. User clicks save.

### View Analytics


### First Launch Tutorial

## Requirements
2.0 Core Requirements:
2.1 Ingredients, Recipes & Meal Planning:
2.1.a The system shall allow users to create, edit, and delete ingredients.
2.1.b The system shall allow users to create, edit, and delete packages (price/quantity) for ingredients at specific Stores.
2.1.c The system shall allow users to create, edit, and delete recipes consisting of Ingredients and instructions.
2.1.d The system shall allow users to create pre-planned meals from recipes.
2.1.e The system shall allow users to schedule meals (from pre-planned meals or a restaurant) on a calendar.
2.2 Shopping List & Inventory Management:
2.2.a The system shall automatically generate a shopping list based on scheduled Meals and needed Ingredients, and best price.
2.2.b The system shall allow users to manually move items from one store to another.
2.2.c The system shall allow users to manually add independent ingredients to the shopping list that are not associated with a scheduled meal.
2.2.d The system shall allow users to manually add items not considered ingredients to the shopping list.
2.2.e The system shall allow users to mark items on the shopping list as purchased.
2.2.f The system shall track already owned ingredients derived from items marked as purchased on the Shopping List as list labeled “Pantry”.
2.2.g The system shall allow users to define "bridge conversions" between Package units (e.g., "each") and Recipe units (e.g., "cups").
2.2.h The system shall automatically perform standard mass and volume conversions (e.g., oz to lbs, tsp to tbsp) without user configuration.
2.2.i The system shall automatically decrement the specific quantity of ingredients used in a meal from the “Pantry” upon user confirmation that the meal was consumed.
2.2.j The system shall allow users to manually adjust the quantity of ingredients in the “Pantry” independently of the shopping list.
2.3 Financials & Analytics:
2.3.a The system shall calculate the subtotal cost of the Shopping List based on the selected Package prices.
2.3.b The system shall allow users to input a final receipt total after shopping to calculate the difference between projected and actual costs.
2.3.c When projected and actual costs differ, the system shall prompt users to update item’s prices to account for the discrepancy.
2.3.d The system shall provide a dedicated Analytics View for daily, weekly, and monthly cost breakdowns.
2.3.e The system shall calculate and display cost per meal and cost per recipe per person based on current data.
2.3.f The system shall display a comparison between projected costs (based on plans) and actual costs (based on verified receipts) for Weekly, Monthly, and Annual views.
2.4 System Architecture & Notifications:
2.4.a The system shall persist all user data locally using an SQLite database.
2.4.b The system shall trigger a notification 30 minutes (default) after a scheduled meal time prompting the user to verify if the meal was consumed.
3.0 Stretch Requirements:
3.1 Advanced Inventory Features:
3.1.a The system may allow users to sort Ingredients by category or alphabetically.
3.1.b The system may allow users to sort recipes by alphabetically or meal type.
3.1.c The system may allow users to select an option called “What can I make now” which will display recipes and meals that the user already has in their “Pantry”.
3.1.d The system may allow users to sort Recipes and Meals using a "can make now" filter, which prioritizes items where all ingredients are in their Pantry.
3.1.e The system may provide a dashboard shortcut to immediately view recipes and meals available to cook based on current inventory.
3.2 Advanced Input Methods:
3.2.a The system may allow users to input/update ingredients through scanning receipts (OCR).
3.2.b The system may allow users to scan physical recipes to add them to the database.
3.3 UI/UX & Customization:
3.3.a The system may allow users to customize the dashboard to specify desired cost, meal plan, and shopping list overviews.
3.3.b The system may allow users to customize the app theme.
3.3.c The system may allow users to configure the delay time for the "Meal Consumed" notification.
3.4 Data & Financial Enhancements:
3.4.a The system may allow users to input a grocery tax percentage for accurate total cost calculation.
3.4.b The system may allow users to export data to JSON for backup or transfer to another device.
3.5 Advanced Meal Planning:
3.5.a The system may automatically calculate an ideal start time to cook a meal.
3.5.b The system may trigger a notification reminding a user to start cooking.


## Tests
6.2.1 Core Tests:

Test Req 2.1.a: Create Ingredient

| Setup | Action | Success |
| --- | --- | --- |
| User is on the "Ingredients" dashboard. | User clicks "New," inputs Name "Flour", Category "Grain", and saves. | "Flour" appears in the ingredient list. |

Test Req 2.1.a: Edit Ingredient

| Setup | Action | Success |
| --- | --- | --- |
| User is on the "Ingredients" dashboard. | User clicks "Flour", "Edit," changes Name to "Wheat Flour" and saves. | "Wheat Flour" appears in the list instead of "Flour". |

Test Req 2.1.a: Delete Ingredient

| Setup | Action | Success |
| --- | --- | --- |
| User is on the "Ingredients" dashboard. | User clicks "Wheat Flour", then "Delete." | "Wheat Flour" disappears from the list and database. |

Test Req 2.1.b: Create Package

| Setup | Action | Success |
| --- | --- | --- |
| User is viewing "Flour" details. | User selects "Purchase Options", clicks "Add Option", inputs Store "Walmart", Price "$5.00", Quantity "5", Unit "lbs", and saves. | The new package option appears under "Flour" purchase options. |

Test Req 2.1.b: Edit Package

| Setup | Action | Success |
| --- | --- | --- |
| User is viewing "Flour" purchase options. | User clicks "Edit" on the "Walmart" option, changes Price to "$6.00", and saves. | The package price updates to $6.00 in the list. |

Test Req 2.1.b: Delete Package

| Setup | Action | Success |
| --- | --- | --- |
| User is viewing "Flour" purchase options. | User clicks "Delete" on the "Walmart" option. | The package option disappears from the list. |

Test Req 2.1.c: Create Recipe

| Setup | Action | Success |
| --- | --- | --- |
| User is on the "Recipes" dashboard. | User clicks "New," inputs Title "Tacos," adds "Beef" and "Shells," and saves. | "Tacos" appears in the recipe list. Clicking it reveals the correct ingredients saved in the database. |

Test Req 2.1.c: Edit Recipe

| Setup | Action | Success | 
| --- | --- | --- |
| User is on the "Recipes" dashboard. | User clicks the three dots on “Tacos”, "Edit," adds “Cheese”, “¼ cup” and saves. | Clicking “Tacos” reveals cheese is listed in the ingredients tab and saved in the database. |

Test Req 2.1.c: Delete Recipe

| Setup | Action | Success |
| --- | --- | --- |
| User is on the "Recipes" dashboard. | User clicks the three dots on “Tacos”, then "Delete." | “Tacos” Disappears from the recipes list and is removed from the database. |

Test Req 2.1.d: Create Pre-Planned Meal

| Setup | Action | Success |
| --- | --- | --- |
| User is on the "Meals" dashboard. | User clicks "New," inputs Name "Taco Night", adds Recipe "Tacos", and saves. | "Taco Night" appears in the meal list containing the "Tacos" recipe. |

Test Req 2.1.e: Schedule Meal

| Setup | Action | Success |
| --- | --- | --- |
| User is on the "Calendar" view. | User clicks "Add Meal," selects date/time, chooses Meal "Taco Night", enters "4" people, and saves. | "Taco Night" appears on the calendar at the selected slot. |

Test Req 2.2.a: Generate Shopping List

| Setup | Action | Success |
| --- | --- | --- |
| "Taco Night" is scheduled for next week. | User opens the "Shopping List" view. | Ingredients for "Tacos" (Beef, Shells, Cheese) appear in the list with calculated quantities. |

Test Req 2.2.b: Move Store Item

| Setup | Action | Success |
| --- | --- | --- |
| "Beef" is listed under "Walmart" in Shopping List. | User edits "Beef" in the list, changes store to "Target", and saves. | "Beef" now appears under the "Target" section of the list. |

Test Req 2.2.c: Add Independent Ingredient

| Setup | Action | Success |
| --- | --- | --- |
| User is on the "Shopping List" view. | User clicks "Add Item", selects Ingredient "Milk", and saves. | "Milk" appears in the shopping list. |

Test Req 2.2.d: Add Non-Ingredient Item

| Setup | Action | Success |
| --- | --- | --- |
| User is on the "Shopping List" view. | User clicks "Add Item", selects "Custom", inputs "Paper Towels", and saves. | "Paper Towels" appears in the shopping list. |

Test Req 2.2.e: Mark Item Purchased

| Setup | Action | Success |
| --- | --- | --- |
| "Beef" is in the Shopping List. | User checks the box next to "Beef". | "Beef" is marked as purchased (crossed out or moved to 'Done'). |

Test Req 2.2.f: Track Pantry (from Purchase)

| Setup | Action | Success |
| --- | --- | --- |
| User marks "Beef" as purchased in Shopping List. | User navigates to "Pantry" view. | "Beef" is listed in the Pantry with the purchased quantity. |

Test Req 2.2.g: Bridge Conversions

| Setup | Action | Success |
| --- | --- | --- |
| User is viewing "Eggs" ingredient. | User adds conversion: 1 Dozen = 12 Each. | Recipe requiring "2 Each" Eggs correctly calculates cost based on "Dozen" package price. |

Test Req 2.2.h: Standard Conversions

| Setup | Action | Success |
| --- | --- | --- |
| Recipe requires 16 oz "Beef". Package is 1 lb. | User views Shopping List. | System correctly identifies 1 lb package satisfies 16 oz requirement without error. |

Test Req 2.2.i: Decrement Pantry

| Setup | Action | Success |
| --- | --- | --- |
| User receives "Meal Consumed" notification for "Taco Night". | User confirms "Yes". | Pantry quantity for "Beef", "Shells", "Cheese" decreases by recipe amounts. |

Test Req 2.2.j: Manual Pantry Adjustment

| Setup | Action | Success |
| --- | --- | --- |
| "Milk" is in Pantry with Qty 1 gal. | User edits "Milk" in Pantry, changes Qty to 0.5 gal. | Pantry shows "Milk" with 0.5 gal. |

Test Req 2.3.a: Calculate Subtotal

| Setup | Action | Success |
| --- | --- | --- |
| Shopping list has items totaling $20. | User views Shopping List. | "Subtotal: $20.00" is displayed. |

Test Req 2.3.b: Input Receipt Total

| Setup | Action | Success |
| --- | --- | --- |
| Shopping list subtotal is $20. | User clicks "Complete Shopping", enters Actual Total "$22.00". | System records the transaction with $22.00 actual cost. |

Test Req 2.3.c: Prompt Price Update

| Setup | Action | Success |
| --- | --- | --- |
| Actual Total ($22) > Subtotal ($20). | User submits Actual Total. | System prompts "Prices differed. Update item prices?" |

Test Req 2.3.d: Analytics View

| Setup | Action | Success |
| --- | --- | --- |
| System has recorded purchase history. | User opens "Analytics". | Graphs/Tables for Daily, Weekly, Monthly costs are visible. |

Test Req 2.3.e: Cost Per Meal

| Setup | Action | Success |
| --- | --- | --- |
| User views "Tacos" recipe details. | Recipe has ingredients with prices. | Display shows "Cost per serving: $X.XX". |

Test Req 2.3.f: Projected vs Actual Comparison

| Setup | Action | Success |
| --- | --- | --- |
| User has completed shopping trips. | User views Analytics "Comparison". | Chart shows Projected bars vs Actual bars for recent periods. |

Test Req 2.4.a: Data Persistence

| Setup | Action | Success |
| --- | --- | --- |
| User adds "New Recipe" and closes app. | User restarts app. | "New Recipe" is present in the list. |

Test Req 2.4.b: Meal Notification

| Setup | Action | Success |
| --- | --- | --- |
| Meal scheduled for 6:00 PM. | Time reaches 6:30 PM. | System displays notification "Did you eat [Meal Name]?". |

6.2.2 Stretch Tests:

Test Req 3.1.a: Sort Ingredients

| Setup | Action | Success |
| --- | --- | --- |
| Ingredients list is unsorted. | User selects Sort by "Alphabetical". | Ingredients appear in A-Z order. |

Test Req 3.1.b: Sort Recipes

| Setup | Action | Success |
| --- | --- | --- |
| Recipes list is unsorted. | User selects Sort by "Meal Type". | Recipes are grouped by Breakfast, Lunch, Dinner. |

Test Req 3.1.c: What Can I Make Now (Option)

| Setup | Action | Success |
| --- | --- | --- |
| Pantry has ingredients for "Tacos". | User selects "What can I make now" option. | "Tacos" appears in the results. |

Test Req 3.1.d: Can Make Now Filter

| Setup | Action | Success |
| --- | --- | --- |
| Recipe list has many items. | User applies "Can Make Now" filter. | Only recipes with full ingredients in Pantry are shown. |

Test Req 3.1.e: Dashboard Shortcut

| Setup | Action | Success |
| --- | --- | --- |
| User is on Home Dashboard. | User clicks "Cook Now" shortcut. | Navigates to "Can Make Now" filtered recipe list. |

Test Req 3.2.a: OCR Receipt

| Setup | Action | Success |
| --- | --- | --- |
| User has a physical receipt. | User selects "Scan Receipt" and takes photo. | Items from receipt are parsed and added to inventory/price history. |

Test Req 3.2.b: Scan Recipe

| Setup | Action | Success |
| --- | --- | --- |
| User has a physical recipe card. | User selects "Scan Recipe" and takes photo. | Recipe text is parsed into Title, Ingredients, Instructions. |

Test Req 3.3.a: Customize Dashboard

| Setup | Action | Success |
| --- | --- | --- |
| User is in Settings -> Dashboard. | User enables "Show Weekly Cost". | Home Dashboard now displays Weekly Cost widget. |

Test Req 3.3.b: App Theme

| Setup | Action | Success |
| --- | --- | --- |
| User is in Settings -> Appearance. | User selects "Dark Mode". | UI colors change to dark theme. |

Test Req 3.3.c: Notification Delay

| Setup | Action | Success |
| --- | --- | --- |
| User is in Settings -> Notifications. | User changes Meal Check delay to 60 mins. | Notification appears 1 hour after meal time instead of 30 mins. |

Test Req 3.4.a: Grocery Tax

| Setup | Action | Success |
| --- | --- | --- |
| User is in Settings -> Financials. | User sets Tax Rate to 8.25%. | Shopping list Estimated Total includes 8.25% tax. |

Test Req 3.4.b: Export Data

| Setup | Action | Success |
| --- | --- | --- |
| User is in Settings -> Data. | User clicks "Export JSON". | JSON file with all user data is generated and shared. |

Test Req 3.5.a: Ideal Start Time

| Setup | Action | Success |
| --- | --- | --- |
| Meal scheduled for 6:00 PM. Prep+Cook time is 45 mins. | User views Meal details. | "Start Cooking at 5:15 PM" is displayed. |

Test Req 3.5.b: Cooking Reminder

| Setup | Action | Success |
| --- | --- | --- |
| Ideal start time is 5:15 PM. | Time reaches 5:15 PM. | Notification "Start cooking [Meal] now" appears. |
